# Indexes
An **index** is a database structure that **improves the speed of data retrieval operations on a table**. Indexes are used to quickly locate data without having to search every row in a database table every time a query is run. **The users cannot see the indexes**. They are just used to speed up searches/queries.

Think of an index like an index in a book. Instead of scanning every page for a topic, you can use the index to find the exact pages.

> [!NOTE]
> While indexes speed up data retrieval, they can **slow down** data modification operations (INSERT, UPDATE, DELETE) because the database must also update the indexes when the data changes.

## Creating an Index
You can create an index on one or more columns in a table using the `CREATE INDEX` command.

```sql
CREATE INDEX index_name ON table_name (column1, column2, ...);
```
> [!TIP]
> You can create indexes while defining a table using the `PRIMARY KEY`, `UNIQUE`, `INDEX`, `FULLTEXT`, or `SPATIAL` keywords.

### Primary Key Index
Uniquely identifies each row in a table. Each table can have only one primary key, and it automatically creates a unique index.

**Example**
```sql
CREATE TABLE Students (
     id INT PRIMARY KEY,
     name VARCHAR(100),
     age INT
);
```
This creates a primary key index on the `id` column.

### Unique Index
Ensures all values in the indexed column(s) are unique. Prevents duplicate values.

**Example**
```sql
CREATE UNIQUE INDEX idx_id_unique ON Students (id);
```

### Simple Index
Creates a basic index on a single column. Values can be duplicated.

**Example**
```sql
CREATE INDEX idx_name ON Students (name);
```
### Composite (Multi-Column) Index
An index created on two or more columns. Useful for queries that filter on multiple columns together.

**Example**
```sql
CREATE INDEX idx_name_age ON Students (name, age);
```
This index is useful for queries filtering by both `name` and `age`.

### Fulltext Index
Used for advanced text searching in large text columns (`CHAR`, `VARCHAR`, `TEXT`). Supports complex search queries such as natural language searches.

**Example**
```sql
CREATE FULLTEXT INDEX idx_name_fulltext ON Students (name);
```

### Descending Index
Stores indexed values in descending order, which can speed up queries that sort data in descending order. Available in MySQL 8.0 and above. 

**Example**
```sql
CREATE INDEX idx_age_desc ON Students (age DESC);
```

### Spatial Index
Used for spatial (geometry) data types such as `POINT`, `LINESTRING`, or `POLYGON`. Useful for geographic or location-based data.

**Example**
```sql
CREATE TABLE Locations (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    location POINT NOT NULL,
    SPATIAL INDEX idx_location (location)
);
```

## Viewing Indexes

To display all indexes on a table, use:

```sql
SHOW INDEX FROM table_name;
```

**Example**
```sql
SHOW INDEX FROM Students;
```

## Removing an Index
To remove an index (except for a PRIMARY KEY), use:
```sql
DROP INDEX index_name ON table_name;
```

**Example**
```sql
DROP INDEX idx_name ON Students;
```

> [!IMPORTANT] 
> To remove an index created for a PRIMARY KEY, use:
> ```sql
> ALTER TABLE table_name DROP PRIMARY KEY;
> ```


## Practice
Create a new table called `Persons` with the following columns and data types. 

| Column Name | Data Type     |
|-------------|---------------|
| id          | INT           |
| firstName   | VARCHAR(255)  |
| lastName    | VARCHAR(255)  |
| address     | VARCHAR(255)  |

> The `id` column must be a primary key.

1. Create a unique index on the `address` column.
2. Create an index on both `id` and `firstName` columns together.
4. Show all indexes on the `Persons` table.
5. Drop the index on the `address` column.
6. Try to drop the primary key index. If you see an error, use the correct command to remove it.

